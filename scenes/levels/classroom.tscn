[gd_scene load_steps=30 format=2]

[ext_resource path="res://sprites/environment/library/door.png" type="Texture" id=1]
[ext_resource path="res://scenes/utilities/dialogue controller.tscn" type="PackedScene" id=2]
[ext_resource path="res://scenes/utilities/interactable.gd" type="Script" id=3]
[ext_resource path="res://sprites/environment/classroom/background.png" type="Texture" id=4]
[ext_resource path="res://scenes/utilities/interactable_item.gd" type="Script" id=5]
[ext_resource path="res://sprites/environment/classroom/foreground.png" type="Texture" id=6]
[ext_resource path="res://sprites/environment/classroom/props.png" type="Texture" id=7]
[ext_resource path="res://scenes/levels/classroom.gd" type="Script" id=8]
[ext_resource path="res://sprites/environment/classroom/magic_pot.png" type="Texture" id=9]
[ext_resource path="res://scenes/props/cursor.gd" type="Script" id=10]
[ext_resource path="res://shaders/outline.gdshader" type="Shader" id=11]
[ext_resource path="res://sprites/environment/classroom/desk2.png" type="Texture" id=12]
[ext_resource path="res://sprites/environment/classroom/desk3.png" type="Texture" id=13]
[ext_resource path="res://sprites/environment/classroom/desk4.png" type="Texture" id=14]
[ext_resource path="res://sprites/environment/classroom/desk5.png" type="Texture" id=15]
[ext_resource path="res://sprites/environment/classroom/desk1.png" type="Texture" id=16]
[ext_resource path="res://sprites/environment/classroom/desk6.png" type="Texture" id=17]
[ext_resource path="res://scenes/utilities/player spawn.gd" type="Script" id=18]

[sub_resource type="ShaderMaterial" id=12]
shader = ExtResource( 11 )
shader_param/outLineSize = 0.0
shader_param/outLineColor = Plane( 2.169, 1, 0.6, 1 )

[sub_resource type="ShaderMaterial" id=15]
shader = ExtResource( 11 )
shader_param/outLineSize = 0.0
shader_param/outLineColor = Plane( 2, 1, 0.6, 1 )

[sub_resource type="ShaderMaterial" id=16]
shader = ExtResource( 11 )
shader_param/outLineSize = 0.0
shader_param/outLineColor = Plane( 2, 1, 0.6, 1 )

[sub_resource type="ShaderMaterial" id=17]
shader = ExtResource( 11 )
shader_param/outLineSize = 0.0
shader_param/outLineColor = Plane( 2, 1, 0.6, 1 )

[sub_resource type="ShaderMaterial" id=18]
shader = ExtResource( 11 )
shader_param/outLineSize = 0.0
shader_param/outLineColor = Plane( 2, 1, 0.6, 1 )

[sub_resource type="ShaderMaterial" id=19]
shader = ExtResource( 11 )
shader_param/outLineSize = 0.0
shader_param/outLineColor = Plane( 2, 1, 0.6, 1 )

[sub_resource type="ShaderMaterial" id=20]
shader = ExtResource( 11 )
shader_param/outLineSize = 0.0
shader_param/outLineColor = Plane( 2, 1, 0.6, 1 )

[sub_resource type="RectangleShape2D" id=11]
extents = Vector2( 20.706, 57.2937 )

[sub_resource type="RectangleShape2D" id=14]
extents = Vector2( 26, 11 )

[sub_resource type="NavigationPolygon" id=4]
vertices = PoolVector2Array( 30.6921, 134.483, 440.229, 133.983, 439.73, 184.926, 354.826, 187.922, 29.6932, 516.052, 354.326, 516.551 )
polygons = [ PoolIntArray( 0, 1, 2, 3 ), PoolIntArray( 4, 0, 3, 5 ) ]
outlines = [ PoolVector2Array( 30.6921, 134.483, 440.229, 133.983, 439.73, 184.926, 354.826, 187.922, 354.326, 516.551, 29.6932, 516.052 ) ]

[sub_resource type="RectangleShape2D" id=13]
extents = Vector2( 17, 4 )

[node name="classroom" type="Node2D"]
script = ExtResource( 8 )

[node name="cursor" type="Node2D" parent="."]
script = ExtResource( 10 )

[node name="dialogue controller" parent="." instance=ExtResource( 2 )]

[node name="environment" type="YSort" parent="."]

[node name="player spawn" type="YSort" parent="environment"]
position = Vector2( 0, -1 )
script = ExtResource( 18 )

[node name="0" type="Node2D" parent="environment/player spawn"]
position = Vector2( 325.819, 468.319 )

[node name="static objects" type="YSort" parent="environment"]

[node name="walls" type="Sprite" parent="environment/static objects"]
z_index = 2
texture = ExtResource( 6 )
centered = false

[node name="floor" type="Sprite" parent="environment/static objects"]
texture = ExtResource( 4 )
centered = false

[node name="props" type="Sprite" parent="environment/static objects"]
z_index = 1
texture = ExtResource( 7 )
centered = false

[node name="magic pot" type="Sprite" parent="environment/static objects"]
z_index = 2
texture = ExtResource( 9 )
centered = false

[node name="interactable objects" type="YSort" parent="environment"]

[node name="door" type="Sprite" parent="environment/interactable objects"]
material = SubResource( 12 )
position = Vector2( 375.941, 463.301 )
z_index = 2
texture = ExtResource( 1 )

[node name="desk 1" type="Sprite" parent="environment/interactable objects"]
material = SubResource( 15 )
position = Vector2( 103, 322 )
z_index = 1
texture = ExtResource( 16 )

[node name="desk 2" type="Sprite" parent="environment/interactable objects"]
material = SubResource( 16 )
position = Vector2( 263, 322 )
z_index = 1
texture = ExtResource( 12 )

[node name="desk 3" type="Sprite" parent="environment/interactable objects"]
material = SubResource( 17 )
position = Vector2( 103, 397 )
z_index = 1
texture = ExtResource( 13 )

[node name="desk 4" type="Sprite" parent="environment/interactable objects"]
material = SubResource( 18 )
position = Vector2( 265, 398 )
z_index = 1
texture = ExtResource( 14 )

[node name="desk 5" type="Sprite" parent="environment/interactable objects"]
material = SubResource( 19 )
position = Vector2( 103, 474 )
z_index = 1
texture = ExtResource( 15 )

[node name="desk 6" type="Sprite" parent="environment/interactable objects"]
material = SubResource( 20 )
position = Vector2( 263, 474 )
z_index = 1
texture = ExtResource( 17 )

[node name="interactable zone" type="Area2D" parent="environment"]
script = ExtResource( 3 )

[node name="door to hallway" type="CollisionShape2D" parent="environment/interactable zone"]
position = Vector2( 371.294, 463.951 )
shape = SubResource( 11 )
script = ExtResource( 5 )
travel_to = "horizontal hallway"
object_name = "door"
outline_size = 0.026
sprite = NodePath("../../interactable objects/door")
spawn_point = 1

[node name="desk 1" type="CollisionShape2D" parent="environment/interactable zone"]
position = Vector2( 114, 321 )
shape = SubResource( 14 )
script = ExtResource( 5 )
object_name = "desk 1"
outline_size = 0.025
sprite = NodePath("../../interactable objects/desk 1")
TYPE = 1

[node name="desk 2" type="CollisionShape2D" parent="environment/interactable zone"]
position = Vector2( 273, 324 )
shape = SubResource( 14 )
script = ExtResource( 5 )
object_name = "desk 2"
outline_size = 0.025
sprite = NodePath("../../interactable objects/desk 2")
TYPE = 1

[node name="desk 3" type="CollisionShape2D" parent="environment/interactable zone"]
position = Vector2( 114, 400 )
shape = SubResource( 14 )
script = ExtResource( 5 )
object_name = "desk 3"
outline_size = 0.025
sprite = NodePath("../../interactable objects/desk 3")
TYPE = 1

[node name="desk 4" type="CollisionShape2D" parent="environment/interactable zone"]
position = Vector2( 268, 401 )
shape = SubResource( 14 )
script = ExtResource( 5 )
object_name = "desk 4"
outline_size = 0.025
sprite = NodePath("../../interactable objects/desk 4")
TYPE = 1

[node name="desk 5" type="CollisionShape2D" parent="environment/interactable zone"]
position = Vector2( 111, 478 )
shape = SubResource( 14 )
script = ExtResource( 5 )
object_name = "desk 5"
outline_size = 0.025
sprite = NodePath("../../interactable objects/desk 5")
TYPE = 1

[node name="desk 6" type="CollisionShape2D" parent="environment/interactable zone"]
position = Vector2( 272, 477 )
shape = SubResource( 14 )
script = ExtResource( 5 )
object_name = "desk 6"
outline_size = 0.025
sprite = NodePath("../../interactable objects/desk 6")
TYPE = 1

[node name="player" type="YSort" parent="environment"]

[node name="navigation" type="Navigation2D" parent="."]

[node name="navmesh" type="NavigationPolygonInstance" parent="navigation"]
navpoly = SubResource( 4 )

[node name="collisions" type="StaticBody2D" parent="navigation"]

[node name="stage" type="CollisionPolygon2D" parent="navigation/collisions"]
polygon = PoolVector2Array( 117, 271, 148, 286, 234, 285, 271, 273, 275, 223, 117, 222 )

[node name="desk" type="CollisionShape2D" parent="navigation/collisions"]
position = Vector2( 273, 473 )
shape = SubResource( 13 )

[node name="desk2" type="CollisionShape2D" parent="navigation/collisions"]
position = Vector2( 115, 474 )
shape = SubResource( 13 )

[node name="desk3" type="CollisionShape2D" parent="navigation/collisions"]
position = Vector2( 111, 395 )
shape = SubResource( 13 )

[node name="desk4" type="CollisionShape2D" parent="navigation/collisions"]
position = Vector2( 106, 319 )
shape = SubResource( 13 )

[node name="desk5" type="CollisionShape2D" parent="navigation/collisions"]
position = Vector2( 270, 321 )
shape = SubResource( 13 )

[node name="desk6" type="CollisionShape2D" parent="navigation/collisions"]
position = Vector2( 270, 398 )
shape = SubResource( 13 )

[connection signal="body_shape_entered" from="environment/interactable zone" to="environment/interactable zone" method="_on_interactable_zone_body_shape_entered"]
[connection signal="body_shape_exited" from="environment/interactable zone" to="environment/interactable zone" method="_on_interactable_zone_body_shape_exited"]
[connection signal="input_event" from="environment/interactable zone" to="environment/interactable zone" method="_on_interactable_zone_input_event"]
