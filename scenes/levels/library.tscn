[gd_scene load_steps=55 format=2]

[ext_resource path="res://sprites/environment/library/props.png" type="Texture" id=1]
[ext_resource path="res://scenes/utilities/dialogue controller.tscn" type="PackedScene" id=2]
[ext_resource path="res://scenes/utilities/interactable.gd" type="Script" id=3]
[ext_resource path="res://sprites/environment/library/door.png" type="Texture" id=4]
[ext_resource path="res://scenes/utilities/interactable_item.gd" type="Script" id=5]
[ext_resource path="res://sprites/environment/library/foreground.png" type="Texture" id=6]
[ext_resource path="res://sprites/environment/library/background.png" type="Texture" id=7]
[ext_resource path="res://scenes/levels/library.gd" type="Script" id=8]
[ext_resource path="res://sprites/environment/library/chair.png" type="Texture" id=9]
[ext_resource path="res://sprites/environment/library/shelf_3.png" type="Texture" id=10]
[ext_resource path="res://shaders/outline.gdshader" type="Shader" id=11]
[ext_resource path="res://sprites/environment/library/stairs.png" type="Texture" id=12]
[ext_resource path="res://sprites/environment/library/table.png" type="Texture" id=13]
[ext_resource path="res://sprites/environment/library/torch holder.png" type="Texture" id=14]
[ext_resource path="res://sprites/environment/library/banner.png" type="Texture" id=15]
[ext_resource path="res://sprites/environment/library/shelf_4.png" type="Texture" id=16]
[ext_resource path="res://sprites/environment/library/shelf_2.png" type="Texture" id=17]
[ext_resource path="res://sprites/environment/library/shelf_1.png" type="Texture" id=18]
[ext_resource path="res://sprites/environment/library/shelf_5.png" type="Texture" id=19]
[ext_resource path="res://sprites/environment/library/shelf_7.png" type="Texture" id=20]
[ext_resource path="res://sprites/environment/library/shelf_6.png" type="Texture" id=21]
[ext_resource path="res://scenes/props/cursor.gd" type="Script" id=22]
[ext_resource path="res://scenes/utilities/player spawn.gd" type="Script" id=23]
[ext_resource path="res://sprites/environment/library/column.png" type="Texture" id=24]
[ext_resource path="res://sprites/environment/sky/parallaxbg_bunnies.png" type="Texture" id=25]
[ext_resource path="res://sprites/environment/sky/parallaxbg_clouds.png" type="Texture" id=26]
[ext_resource path="res://sprites/environment/sky/parallaxbg_sky.png" type="Texture" id=27]
[ext_resource path="res://sprites/environment/sky/parallaxbg-sunst.png" type="Texture" id=28]

[sub_resource type="ShaderMaterial" id=39]
shader = ExtResource( 11 )
shader_param/outLineSize = 0.0
shader_param/outLineColor = Plane( 2, 1, 0.6, 1 )

[sub_resource type="ShaderMaterial" id=14]
shader = ExtResource( 11 )
shader_param/outLineSize = 0.0
shader_param/outLineColor = Plane( 2, 1, 0.6, 1 )

[sub_resource type="ShaderMaterial" id=40]
shader = ExtResource( 11 )
shader_param/outLineSize = 0.0
shader_param/outLineColor = Plane( 2, 1, 0.6, 1 )

[sub_resource type="ShaderMaterial" id=41]
shader = ExtResource( 11 )
shader_param/outLineSize = 0.0
shader_param/outLineColor = Plane( 2, 1, 0.6, 1 )

[sub_resource type="ShaderMaterial" id=42]
shader = ExtResource( 11 )
shader_param/outLineSize = 0.0
shader_param/outLineColor = Plane( 2, 1, 0.6, 1 )

[sub_resource type="ShaderMaterial" id=43]
shader = ExtResource( 11 )
shader_param/outLineSize = 0.0
shader_param/outLineColor = Plane( 2, 1, 0.6, 1 )

[sub_resource type="ShaderMaterial" id=38]
shader = ExtResource( 11 )
shader_param/outLineSize = 0.0
shader_param/outLineColor = Plane( 2, 1, 0.6, 1 )

[sub_resource type="ShaderMaterial" id=12]
shader = ExtResource( 11 )
shader_param/outLineSize = 0.0
shader_param/outLineColor = Plane( 2.169, 1, 0.6, 1 )

[sub_resource type="RectangleShape2D" id=11]
extents = Vector2( 12.5123, 57.2937 )

[sub_resource type="RectangleShape2D" id=34]
extents = Vector2( 35, 78 )

[sub_resource type="NavigationPolygon" id=4]
vertices = PoolVector2Array( 654.882, -42.359, 655.882, -16.359, 396.668, -14.2063, 323.79, -39.4332, 396.882, 43.641, 309.882, 42.641, 176.882, -46.359, -2.4776, 413.53, -2.42502, 234.599, 181.882, 236.641, 491.409, 414.09, 177.474, -128.008, 323.882, -128.359, 182.439, 42.9658, 77.882, 43.641, 77.6879, -13.6458, -161.687, -18.1305, -161.687, -46.1604, 309.882, 237.641, 489.882, 237.641 )
polygons = [ PoolIntArray( 0, 1, 2, 3 ), PoolIntArray( 3, 2, 4, 5, 6 ), PoolIntArray( 7, 8, 9, 10 ), PoolIntArray( 11, 12, 3, 6 ), PoolIntArray( 13, 14, 15, 6 ), PoolIntArray( 16, 17, 6, 15 ), PoolIntArray( 13, 6, 5, 18 ), PoolIntArray( 9, 13, 18 ), PoolIntArray( 10, 9, 18 ), PoolIntArray( 10, 18, 19 ) ]
outlines = [ PoolVector2Array( -2.42502, 234.599, 181.882, 236.641, 182.439, 42.9658, 77.882, 43.641, 77.6879, -13.6458, -161.687, -18.1305, -161.687, -46.1604, 176.882, -46.359, 177.474, -128.008, 323.882, -128.359, 323.79, -39.4332, 654.882, -42.359, 655.882, -16.359, 396.668, -14.2063, 396.882, 43.641, 309.882, 42.641, 309.882, 237.641, 489.882, 237.641, 491.409, 414.09, -2.4776, 413.53 ) ]

[sub_resource type="RectangleShape2D" id=44]
extents = Vector2( 64, 28 )

[sub_resource type="AtlasTexture" id=3]
atlas = ExtResource( 27 )
region = Rect2( 0, 0, 800, 120 )

[sub_resource type="AtlasTexture" id=31]
atlas = ExtResource( 27 )
region = Rect2( 800, 0, 800, 120 )

[sub_resource type="AtlasTexture" id=32]
atlas = ExtResource( 27 )
region = Rect2( 1600, 0, 800, 120 )

[sub_resource type="AtlasTexture" id=33]
atlas = ExtResource( 27 )
region = Rect2( 2400, 0, 800, 120 )

[sub_resource type="SpriteFrames" id=35]
animations = [ {
"frames": [ SubResource( 3 ), SubResource( 31 ), SubResource( 32 ), SubResource( 33 ) ],
"loop": true,
"name": "default",
"speed": 5.0
} ]

[sub_resource type="AtlasTexture" id=22]
atlas = ExtResource( 28 )
region = Rect2( 0, 0, 800, 120 )

[sub_resource type="AtlasTexture" id=23]
atlas = ExtResource( 28 )
region = Rect2( 800, 0, 800, 120 )

[sub_resource type="AtlasTexture" id=24]
atlas = ExtResource( 28 )
region = Rect2( 1600, 0, 800, 120 )

[sub_resource type="AtlasTexture" id=25]
atlas = ExtResource( 28 )
region = Rect2( 2400, 0, 800, 120 )

[sub_resource type="SpriteFrames" id=36]
animations = [ {
"frames": [ SubResource( 22 ), SubResource( 23 ), SubResource( 24 ), SubResource( 25 ) ],
"loop": true,
"name": "default",
"speed": 5.0
} ]

[sub_resource type="AtlasTexture" id=27]
atlas = ExtResource( 26 )
region = Rect2( 0, 0, 800, 120 )

[sub_resource type="AtlasTexture" id=28]
atlas = ExtResource( 26 )
region = Rect2( 800, 0, 800, 120 )

[sub_resource type="AtlasTexture" id=30]
atlas = ExtResource( 25 )
region = Rect2( 0, 0, 800, 120 )

[sub_resource type="SpriteFrames" id=37]
animations = [ {
"frames": [ SubResource( 27 ), SubResource( 28 ), SubResource( 30 ) ],
"loop": true,
"name": "default",
"speed": 5.0
} ]

[node name="library" type="Node2D"]
script = ExtResource( 8 )

[node name="cursor" type="Node2D" parent="."]
script = ExtResource( 22 )

[node name="dialogue controller" parent="." instance=ExtResource( 2 )]

[node name="environment" type="YSort" parent="."]

[node name="interactable objects" type="YSort" parent="environment"]

[node name="shelf 1" type="Sprite" parent="environment/interactable objects"]
material = SubResource( 39 )
position = Vector2( 16, 126 )
z_index = 1
texture = ExtResource( 18 )
centered = false

[node name="shelf 2" type="Sprite" parent="environment/interactable objects"]
material = SubResource( 14 )
position = Vector2( 112, 126 )
z_index = 1
texture = ExtResource( 17 )
centered = false

[node name="shelf 3" type="Sprite" parent="environment/interactable objects"]
material = SubResource( 40 )
position = Vector2( 208, 126 )
z_index = 1
texture = ExtResource( 10 )
centered = false

[node name="shelf 4" type="Sprite" parent="environment/interactable objects"]
material = SubResource( 41 )
position = Vector2( 560, 126 )
z_index = 1
texture = ExtResource( 16 )
centered = false

[node name="shelf 5" type="Sprite" parent="environment/interactable objects"]
material = SubResource( 42 )
position = Vector2( 656, 126 )
z_index = 1
texture = ExtResource( 19 )
centered = false

[node name="shelf 6" type="Sprite" parent="environment/interactable objects"]
material = SubResource( 43 )
position = Vector2( 752, 126 )
z_index = 1
texture = ExtResource( 21 )
centered = false

[node name="shelf 7" type="Sprite" parent="environment/interactable objects"]
material = SubResource( 38 )
position = Vector2( 592, 422 )
z_index = 1
texture = ExtResource( 20 )
centered = false

[node name="door" type="Sprite" parent="environment/interactable objects"]
material = SubResource( 12 )
position = Vector2( 167.07, 560.609 )
z_index = 2
texture = ExtResource( 4 )

[node name="static objects" type="YSort" parent="environment"]

[node name="floor" type="Sprite" parent="environment/static objects"]
z_index = 1
texture = ExtResource( 7 )
centered = false

[node name="walls" type="Sprite" parent="environment/static objects"]
z_index = 2
texture = ExtResource( 6 )
centered = false

[node name="torch holder" type="Sprite" parent="environment/static objects"]
position = Vector2( 433.346, 260.148 )
z_index = 1
texture = ExtResource( 14 )

[node name="banner" type="Sprite" parent="environment/static objects"]
position = Vector2( 546.986, 210.881 )
z_index = 1
texture = ExtResource( 15 )

[node name="banner2" type="Sprite" parent="environment/static objects"]
position = Vector2( 320.009, 209.802 )
z_index = 1
texture = ExtResource( 15 )

[node name="stairs" type="Sprite" parent="environment/static objects"]
position = Vector2( 38.6453, 244.599 )
z_index = 1
texture = ExtResource( 12 )

[node name="stairs2" type="Sprite" parent="environment/static objects"]
position = Vector2( 669.508, 547.592 )
z_index = 1
texture = ExtResource( 12 )

[node name="chair" type="Sprite" parent="environment/static objects"]
position = Vector2( -0.444946, -0.889893 )
z_index = 3
texture = ExtResource( 9 )
centered = false

[node name="table" type="Sprite" parent="environment/static objects"]
position = Vector2( 223.991, 552.091 )
z_index = 1
texture = ExtResource( 13 )
centered = false

[node name="table2" type="Sprite" parent="environment/static objects"]
position = Vector2( 544.023, 551.507 )
z_index = 1
texture = ExtResource( 13 )
centered = false

[node name="column 1" type="Sprite" parent="environment/static objects"]
position = Vector2( 345, 541 )
z_index = 1
texture = ExtResource( 24 )
offset = Vector2( 0, -10 )

[node name="column 2" type="Sprite" parent="environment/static objects"]
position = Vector2( 518, 540 )
z_index = 1
texture = ExtResource( 24 )
offset = Vector2( 0, -10 )

[node name="table4" type="Sprite" parent="environment/static objects"]
position = Vector2( 544.023, 551.507 )
z_index = 1
texture = ExtResource( 13 )
centered = false

[node name="props" type="Sprite" parent="environment/static objects"]
z_index = 2
z_as_relative = false
texture = ExtResource( 1 )
centered = false

[node name="player spawn" type="YSort" parent="environment"]
script = ExtResource( 23 )

[node name="0" type="Node2D" parent="environment/player spawn"]
position = Vector2( 222, 571 )

[node name="interactable zone" type="Area2D" parent="environment"]
script = ExtResource( 3 )

[node name="door collider" type="CollisionShape2D" parent="environment/interactable zone"]
position = Vector2( 166.154, 567.577 )
shape = SubResource( 11 )
script = ExtResource( 5 )
travel_to = "lounge"
object_name = "door"
outline_size = 0.026
sprite = NodePath("../../interactable objects/door")
spawn_point = 2

[node name="shelf 1" type="CollisionShape2D" parent="environment/interactable zone"]
position = Vector2( 64, 191 )
z_index = 2
shape = SubResource( 34 )
script = ExtResource( 5 )
object_name = "shelf 1"
has_dialogue = true
dialogue = "shelf 1"
outline_size = 0.25
sprite = NodePath("../../interactable objects/shelf 1")
TYPE = 1

[node name="shelf 2" type="CollisionShape2D" parent="environment/interactable zone"]
position = Vector2( 159, 194 )
z_index = 2
shape = SubResource( 34 )
script = ExtResource( 5 )
object_name = "shelf 2"
has_dialogue = true
dialogue = "shelf 2"
outline_size = 0.25
sprite = NodePath("../../interactable objects/shelf 2")
TYPE = 1

[node name="shelf 3" type="CollisionShape2D" parent="environment/interactable zone"]
position = Vector2( 255, 192 )
z_index = 2
shape = SubResource( 34 )
script = ExtResource( 5 )
object_name = "shelf 3"
has_dialogue = true
dialogue = "shelf 3"
outline_size = 0.25
sprite = NodePath("../../interactable objects/shelf 3")
TYPE = 1

[node name="shelf 4" type="CollisionShape2D" parent="environment/interactable zone"]
position = Vector2( 609, 194 )
z_index = 2
shape = SubResource( 34 )
script = ExtResource( 5 )
object_name = "shelf 4"
has_dialogue = true
dialogue = "shelf 4"
outline_size = 0.25
sprite = NodePath("../../interactable objects/shelf 4")
TYPE = 1

[node name="shelf 5" type="CollisionShape2D" parent="environment/interactable zone"]
position = Vector2( 702, 194 )
z_index = 2
shape = SubResource( 34 )
script = ExtResource( 5 )
object_name = "shelf 5"
has_dialogue = true
dialogue = "shelf 5"
outline_size = 0.25
sprite = NodePath("../../interactable objects/shelf 5")
TYPE = 1

[node name="shelf 6" type="CollisionShape2D" parent="environment/interactable zone"]
position = Vector2( 799, 195 )
z_index = 2
shape = SubResource( 34 )
script = ExtResource( 5 )
object_name = "shelf 6"
has_dialogue = true
dialogue = "shelf 6"
outline_size = 0.25
sprite = NodePath("../../interactable objects/shelf 6")
TYPE = 1

[node name="shelf 7" type="CollisionShape2D" parent="environment/interactable zone"]
position = Vector2( 639, 489 )
z_index = 2
shape = SubResource( 34 )
script = ExtResource( 5 )
object_name = "shelf 7"
has_dialogue = true
dialogue = "shelf 7"
outline_size = 0.25
sprite = NodePath("../../interactable objects/shelf 7")
TYPE = 1

[node name="navigation" type="Navigation2D" parent="."]

[node name="navmesh" type="NavigationPolygonInstance" parent="navigation"]
position = Vector2( 186.118, 299.359 )
navpoly = SubResource( 4 )

[node name="collision" type="StaticBody2D" parent="navigation"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="navigation/collision"]
position = Vector2( 431, 734 )
z_index = 1
shape = SubResource( 44 )

[node name="CanvasModulate" type="CanvasModulate" parent="."]
color = Color( 0.0196078, 0, 0.117647, 1 )

[node name="ParallaxBackground" type="ParallaxBackground" parent="."]

[node name="sky" type="ParallaxLayer" parent="ParallaxBackground"]
motion_scale = Vector2( 1, 0.8 )
motion_mirroring = Vector2( 600, 0 )

[node name="sky" type="AnimatedSprite" parent="ParallaxBackground/sky"]
z_index = -1
frames = SubResource( 35 )
frame = 2
centered = false

[node name="sun" type="ParallaxLayer" parent="ParallaxBackground"]
motion_scale = Vector2( 0.4, 1 )

[node name="sun" type="AnimatedSprite" parent="ParallaxBackground/sun"]
position = Vector2( -387, 7 )
scale = Vector2( 1.5, 1.5 )
frames = SubResource( 36 )
frame = 2
centered = false

[node name="clouds" type="ParallaxLayer" parent="ParallaxBackground"]
motion_scale = Vector2( 0.7, 1 )
motion_mirroring = Vector2( 480, 0 )

[node name="clouds" type="AnimatedSprite" parent="ParallaxBackground/clouds"]
position = Vector2( -89, 36 )
frames = SubResource( 37 )
frame = 1
centered = false

[node name="bunnies" type="ParallaxLayer" parent="ParallaxBackground"]
visible = false

[node name="AnimatedSprite" type="AnimatedSprite" parent="ParallaxBackground/bunnies"]
frames = SubResource( 37 )
frame = 1
centered = false

[connection signal="body_shape_entered" from="environment/interactable zone" to="environment/interactable zone" method="_on_interactable_zone_body_shape_entered"]
[connection signal="body_shape_exited" from="environment/interactable zone" to="environment/interactable zone" method="_on_interactable_zone_body_shape_exited"]
[connection signal="input_event" from="environment/interactable zone" to="environment/interactable zone" method="_on_interactable_zone_input_event"]
